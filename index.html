<!DOCTYPE HTML>
<html>
	<head>
		<title>Desktop/Laptop Replacement Util</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<link rel="stylesheet" href="assets/css/bangers.css" />
		<link rel="stylesheet" href="assets/css/material-icons.css" />
    <link rel="import" href="sections/welcome.html">
		<!-- <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Bangers" />
	  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"> -->
	
	<script>
	function setprogress(i){
		
$('.progress .circle').removeClass().addClass('circle');
$('.progress .bar').removeClass().addClass('bar');
  $('.progress .circle:nth-of-type(' + i + ')').addClass('active');
  
  $('.progress .circle:nth-of-type(' + (i-1) + ')').removeClass('active').addClass('done');
  
  $('.progress .circle:nth-of-type(' + (i-1) + ') .label').html('&#10003;');
  
  $('.progress .bar:nth-of-type(' + (i-1) + ')').addClass('active');
  
  $('.progress .bar:nth-of-type(' + (i-2) + ')').removeClass('active').addClass('done');
  
  i++;
  
  if (i==0) {
    $('.progress .bar').removeClass().addClass('bar');
    $('.progress div.circle').removeClass().addClass('circle');
    i = 1;
  }
};
var os=require('os');
      var username=require('username');
      var laptopStatus = "";
      setTimeout(function(){
        document.getElementById('HostName').innerHTML=os.hostname();
        document.getElementById('UserName').innerHTML=username.sync();
			},1000);
			
			var mysql = require('mysql');
      var connection = mysql.createConnection({
        host: "remotemysql.com",
        user: "p7Uck7iBo0",
        database: "p7Uck7iBo0",
        password: "WbjMAoBPE2"
      });
      connection.connect((err)=>{
        if(err){
          return console.log("err.stack")
        }
        console.log("connected successfuly");
      });
      // Queries
     $query = 'SELECT status,req_id FROM `AHD` WHERE `req_TYPE`="Laptop Replacement" and `req_user_id` ="balaji"';

    connection.query($query, function(err, rows, fields) {
    if(err){
        console.log("An error ocurred performing the query.");
        console.log(err);
        return;
    }
    laptopStatus = rows[0].status;
    console.log("Query succesfully executed", rows[0].status);
    console.log("Query succesfully executed", rows[0].req_id);
    document.getElementById('reqId').innerHTML=rows[0].req_id;
    if(laptopStatus === 'In Progress'){ 
        var mysql = require('mysql');
          var connection = mysql.createConnection({
            host: "remotemysql.com",
            user: "p7Uck7iBo0",
            database: "p7Uck7iBo0",
            password: "WbjMAoBPE2"
          });
          connection.connect((err)=>{
            if(err){
              return console.log("err.stack")
            }
            console.log("connected successfuly");
          });
          // Queries
        $querySave = 'update `AMS_HARDWARE` set asset_id = "NewLaptop" where user_id = "bakumar"';

        connection.query($querySave, function(err, rows, fields) {
        if(err){
            console.log("An error ocurred performing the query.");
            console.log(err);
            return;
        }
        
        console.log("Query succesfully executed", rows);
      
    });

    // Close the connection
    connection.end(function(){
        // The connection has been closed
        console.log("connection has been closed");
    });
    
}
});

// Close the connection
connection.end(function(){
    // The connection has been closed
    console.log("connection has been closed");
});
	
	</script>
	</head>
	<body>

		<section id="screenflow">
				<div style="background-color:#312450">
						<div><span style="margin-bottom:0px;font-weight: bold"> Request ID:</span><span style="padding-right: 25vw" id="reqId"></span>
						<span style="margin-bottom:0px;font-weight: bold"> Computer Name:</span><span id="HostName" style="margin-bottom:0px;padding-right: 25vw"></span>
						<span style="margin-bottom:0px;font-weight: bold"> User Name:</span> <span id="UserName" style="margin-bottom:0px"></span>
					</div>
				</div>
				
<div class="progress">
  <div class="circle">
    <span class="label">1</span>
    <span class="title">OneDrive</span>
  </div>
  <span class="bar"></span>
  <div class="circle">
    <span class="label">2</span>
    <span class="title">Softwares</span>
  </div>
  <span class="bar"></span>
  <div class="circle">
    <span class="label">3</span>
    <span class="title">Exceptions</span>
	</div>
	<span class="bar"></span>
  <div class="circle">
    <span class="label">4</span>
    <span class="title">Summary</span>
  </div>
</div>
			</section>

		<!-- Wrapper -->
			<div id="wrapper">
			</div>

		<!-- Footer -->
		

		<!-- Scripts -->
      <script>window.$ = window.jQuery = require('./assets/js/jquery.min.js');</script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
      <script>
        require('./assets/js/menu')
      </script>
	</body>
</html>
